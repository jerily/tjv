# Copyright Jerily LTD. All Rights Reserved.
# SPDX-FileCopyrightText: 2024 Neofytos Dimitriou (neo@jerily.cy)
# SPDX-License-Identifier: MIT.

package require tcltest
namespace import -force ::tcltest::test

package require tjv

source [file join [file dirname [info script]] common.tcl]

# Test cases are from: https://gist.github.com/cpetschnig/294476

test_custom_format ipv6 {
    + 2001:0000:1234:0000:0000:C1C0:ABCD:0876
    + 3ffe:0b00:0000:0000:0001:0000:0000:000a
    + FF02:0000:0000:0000:0000:0000:0000:0001
    + 0000:0000:0000:0000:0000:0000:0000:0001
    + 0000:0000:0000:0000:0000:0000:0000:0000
    + ::ffff:192.168.1.26
    # extra 0 not allowed
    - 02001:0000:1234:0000:0000:C1C0:ABCD:0876
    # extra 0 not allowed
    - 2001:0000:1234:0000:00001:C1C0:ABCD:0876
    + 2001:0000:1234:0000:0000:C1C0:ABCD:0876
    - 2001:0000:1234:0000:0000:C1C0:ABCD:0876  0
    - 2001:0000:1234: 0000:0000:C1C0:ABCD:0876
    - 3ffe:0b00:0000:0001:0000:0000:000a
    - FF02:0000:0000:0000:0000:0000:0000:0000:0001
    - 3ffe:b00::1::a
    - ::1111:2222:3333:4444:5555:6666::
    + 2::10
    + ff02::1
    + fe80::
    + 2002::
    + 2001:db8::
    + 2001:0db8:1234::
    + ::ffff:0:0
    + ::1
    + ::ffff:192.168.1.1
    + 1:2:3:4:5:6:7:8
    + 1:2:3:4:5:6::8
    + 1:2:3:4:5::8
    + 1:2:3:4::8
    + 1:2:3::8
    + 1:2::8
    + 1::8
    + 1::2:3:4:5:6:7
    + 1::2:3:4:5:6
    + 1::2:3:4:5
    + 1::2:3:4
    + 1::2:3
    + 1::8
    + ::2:3:4:5:6:7:8
    + ::2:3:4:5:6:7
    + ::2:3:4:5:6
    + ::2:3:4:5
    + ::2:3:4
    + ::2:3
    + ::8
    + 1:2:3:4:5:6::
    + 1:2:3:4:5::
    + 1:2:3:4::
    + 1:2:3::
    + 1:2::
    + 1::
    + 1:2:3:4:5::7:8
    - 1:2:3::4:5::7:8
    - 12345::6:7:8
    + 1:2:3:4::7:8
    + 1:2:3::7:8
    + 1:2::7:8
    + 1::7:8
    + 1:2:3:4:5:6:1.2.3.4
    + 1:2:3:4:5::1.2.3.4
    + 1:2:3:4::1.2.3.4
    + 1:2:3::1.2.3.4
    + 1:2::1.2.3.4
    + 1::1.2.3.4
    + 1:2:3:4::5:1.2.3.4
    + 1:2:3::5:1.2.3.4
    + 1:2::5:1.2.3.4
    + 1::5:1.2.3.4
    + 1::5:11.22.33.44
    - 1::5:400.2.3.4
    - 1::5:260.2.3.4
    - 1::5:256.2.3.4
    - 1::5:1.256.3.4
    - 1::5:1.2.256.4
    - 1::5:1.2.3.256
    - 1::5:300.2.3.4
    - 1::5:1.300.3.4
    - 1::5:1.2.300.4
    - 1::5:1.2.3.300
    - 1::5:900.2.3.4
    - 1::5:1.900.3.4
    - 1::5:1.2.900.4
    - 1::5:1.2.3.900
    - 1::5:300.300.300.300
    - 1::5:3000.30.30.30
    - 1::400.2.3.4
    - 1::260.2.3.4
    - 1::256.2.3.4
    - 1::1.256.3.4
    - 1::1.2.256.4
    - 1::1.2.3.256
    - 1::300.2.3.4
    - 1::1.300.3.4
    - 1::1.2.300.4
    - 1::1.2.3.300
    - 1::900.2.3.4
    - 1::1.900.3.4
    - 1::1.2.900.4
    - 1::1.2.3.900
    - 1::300.300.300.300
    - 1::3000.30.30.30
    - ::400.2.3.4
    - ::260.2.3.4
    - ::256.2.3.4
    - ::1.256.3.4
    - ::1.2.256.4
    - ::1.2.3.256
    - ::300.2.3.4
    - ::1.300.3.4
    - ::1.2.300.4
    - ::1.2.3.300
    - ::900.2.3.4
    - ::1.900.3.4
    - ::1.2.900.4
    - ::1.2.3.900
}

